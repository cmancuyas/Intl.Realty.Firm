@using Intl.Realty.Firm.Models.Models.ViewModel.SaleListingVM
@model IEnumerable<SaleListingViewModel>

<partial name="~/Views/Shared/_DeleteModal.cshtml">

<script type="text/javascript">
    $("#cancelBtn").click(function () {
            location.reload();
    });

    $("#btnConfirmDelete").click(function () {
        var viewModelList = '@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model))';
        viewModelList = JSON.parse(viewModelList);
        let parameters = { viewModelList: viewModelList };
        $.ajax({
            url: '/SaleListing/DeleteMultiple/',
            type: 'POST',
            data: parameters,
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            success: function (data) {
                // NOTE: TO DO better way of calling callback function from parent
                closeModal();
                // Swal.fire({
                //     title: "Success!",
                //     icon: "success",
                //     confirmButtonText: "Ok",
                //     confirmButtonColor: '#14984a'
                // });
                window.location.reload()
                    // $('#ListPartialContainer').load('/SaleListing/ListPartialView');

            }, 
            
            error: function (e) {
                console.log(e);
            }
        });

    });

    function closeModal() {
        $("#deleteConfirmModal").modal("hide");
        let elem = document.querySelector('#deleteConfirmModal');
        elem.parentNode.removeChild(elem);
    }

</script>
